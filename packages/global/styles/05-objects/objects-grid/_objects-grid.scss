/* ==========================================================================
   #BOLT GRID
   ========================================================================== */

$bolt-grid-sizes: (
  'full': none,
  'xsmall': 'xsmall',
  'small': 'small',
  'medium': 'medium',
  'large': 'large',
  'xlarge': 'xlarge',
);

/**
 * 1. Workaround to Safari layout getting thrown off when using a negative letter-spacing to remove inline-block whitespace
 *    @TODO: remove when v1 grid with CSS Grid support rolls out
 * 2. Reset local font-size inheritance to prevent components w/o default font sizes from breaking
 */
.o-bolt-grid {
  font-size: 0; /* stylelint-disable-line */ /* [1] */
  margin: 0;
  padding: 0;
  list-style: none;
  margin-left: bolt-spacing(medium) * -1;
  flex: 1 1 auto; //Automatically auto fill any available space, in case a grid is nested inside of a flexbox-friendly parent container.
}

.o-bolt-grid__cell {
  display: inline-block;
  vertical-align: top;
  padding-left: bolt-spacing(medium);
  font-size: 1rem; /* stylelint-disable-line */ /* [2] */
}


.o-bolt-grid--rev {
  direction: rtl;

  > .o-bolt-grid__cell {
    direction: ltr;
  }
}



/**
 * Centered grids align grid cells centrally without needing to use push or pull
 * classes. Extends `.o-bolt-grid`.
 */
.o-bolt-grid--center {
  text-align: center;
  justify-content: center;

  > .o-bolt-grid__cell {
    text-align: left;
  }
}



/**
 * Align grid cells vertically (`.o-bolt-grid--middle` or `.o-bolt-grid--bottom`). Extends
 * `.o-bolt-grid`.
 */
.o-bolt-grid--middle {
  &.o-bolt-grid--flex {
    align-items: center;
  }

  > .o-bolt-grid__cell {
    vertical-align: middle;
  }
}

.o-bolt-grid--bottom {
  > .o-bolt-grid__cell {
    vertical-align: bottom;
  }
}


/**
 * Align the entire grid to the right. Extends `.grid`.
 */
.o-bolt-grid--right {
  text-align: right;
  justify-content: flex-end;

  > .o-bolt-grid__cell {
    text-align: left;
  }
}

.o-bolt-grid__cell--middle {
  vertical-align: middle;
  align-self: center;
}

.o-bolt-grid__cell--top {
  vertical-align: top;
  align-self: flex-start;
}

.o-bolt-grid__cell--bottom {
  vertical-align: bottom;
  align-self: flex-end;
}



/** Grid gutter size variations
 * Note: Gutterless grids have all the properties of regular grids, minus any spacing.
 */

@mixin _bolt-grid-sizes($breakpoint: null) {
  @each $name, $size in $bolt-grid-sizes {
    .o-bolt-grid--#{$name}#{$breakpoint} {

      $value: 0; // Handle the 'full bleed' grid variation
      @if ($name != 'full') {
        $value: bolt-spacing($size) * -1;
      }

      @include bolt-margin-left($value);

      > .o-bolt-grid__cell {
        @include bolt-padding-left($value);
      }
    }
  }
}

@include _bolt-grid-sizes;

// Loop over our breakpoints
@each $breakpoint in $breakpoints {
  $breakpointName: nth($breakpoint, 1);
  @include respond-to($breakpointName) {
    @include _bolt-grid-sizes(\@#{$breakpointName});
  }
}



// Flex grid variation
.o-bolt-grid--flex {
  display: flex;
  flex-flow: row wrap;
}



// Matrix grid varition (adds space below each row of grid cells)
.o-bolt-grid--matrix {
  margin-bottom: bolt-v-spacing(medium) * -1;
}

.o-bolt-grid--matrix > .o-bolt-grid__cell {
  padding-bottom: bolt-v-spacing(medium);
}
